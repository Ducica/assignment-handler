function t(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}u((r=r.apply(t,e||[])).next())}))}function e(e,i){const o={};return function(c,u,l){return t(this,void 0,void 0,(function*(){const t=parseInt(c.query.id);if(!isNaN(t)&&t>0){if(o[t]&&Date.now()-o[t].timestamp<=e){const e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}(o[t],["timestamp"]);return void u.status(200).json(e)}const c=yield i(t),l=n(c),a=s(r(l));if(0===a.largestDifference||l.length<=1){let e={success:!0,error:null,result:{range:null}};o[t]=Object.assign(Object.assign({},e),{timestamp:Date.now()}),u.status(200).json(e)}else{let e={success:!0,error:null,result:{range:{start:a.item1,end:a.item2}}};o[t]=Object.assign(Object.assign({},e),{timestamp:Date.now()}),u.status(200).json(e)}}else u.status(400).json({success:!1,error:"Something went wrong",result:null})}))}}const n=t=>{const e=t.reduce(((t,e)=>t+e.price),0)/t.length;return t.filter((t=>t.price>e))},r=t=>t.sort(((t,e)=>t.time.getTime()-e.time.getTime())),s=t=>{let e=0,n=t[0].time,r=t[1].time;for(let s=1;s<t.length;s++){const i=t[s].time.getTime()-t[s-1].time.getTime();i>e&&(e=i,n=t[s-1].time,r=t[s].time)}return{largestDifference:e,item1:n,item2:r}};module.exports=e;export{e as createHandler,s as findLargestTimeDifference,n as getFilteredArray,r as sortByTime};
//# sourceMappingURL=index.js.map
