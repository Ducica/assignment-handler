function t(t,e,n,r){return new(n||(n=Promise))((function(s,o){function i(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}u((r=r.apply(t,e||[])).next())}))}function e(e,o){const i={},c={};return function(u,l){return t(this,void 0,void 0,(function*(){const t=parseInt(u.query.id);if(!isNaN(t)&&t>0){if(i[t]&&Date.now()-i[t].timestamp<=e){const e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]])}return n}(i[t],["timestamp"]);return void l.status(200).json(e)}for(;c[t];)yield new Promise((t=>setTimeout(t,10)));c[t]=!0;const u=yield o(t),a=n(u);if(a.length<=1){const e={success:!0,error:null,result:{range:null}};l.status(200).json(e),c[t]=!1}const m=s(r(a));if(0===m.largestDifference){const e={success:!0,error:null,result:{range:null}};i[t]=Object.assign(Object.assign({},e),{timestamp:Date.now()}),l.status(200).json(e),c[t]=!1}else{const e={success:!0,error:null,result:{range:{start:m.item1,end:m.item2}}};i[t]=Object.assign(Object.assign({},e),{timestamp:Date.now()}),l.status(200).json(e),c[t]=!1}}else l.status(400).json({success:!1,error:"Something went wrong",result:null})}))}}const n=t=>{const e=t.reduce(((t,e)=>t+e.price),0)/t.length;return t.filter((t=>t.price>e))},r=t=>t.sort(((t,e)=>t.time.getTime()-e.time.getTime())),s=t=>{let e=0,n=t[0].time,r=t[1].time;for(let s=1;s<t.length;s++){const o=t[s].time.getTime()-t[s-1].time.getTime();o>e&&(e=o,n=t[s-1].time,r=t[s].time)}return{largestDifference:e,item1:n,item2:r}};export{e as createHandler,s as findLargestTimeDifference,n as getFilteredArray,r as sortByTime};
//# sourceMappingURL=index.js.map
