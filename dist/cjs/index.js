"use strict";function e(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))}Object.defineProperty(exports,"__esModule",{value:!0});const t=e=>{const t=e.reduce(((e,t)=>e+t.price),0)/e.length;return e.filter((e=>e.price>t))},n=e=>e.sort(((e,t)=>e.time.getTime()-t.time.getTime())),r=e=>{let t=0,n=e[0].time,r=e[1].time;for(let s=1;s<e.length;s++){const o=e[s].time.getTime()-e[s-1].time.getTime();o>t&&(t=o,n=e[s-1].time,r=e[s].time)}return{largestDifference:t,item1:n,item2:r}};exports.createHandler=function(s,o){const i={},c={};return function(u,l){return e(this,void 0,void 0,(function*(){const e=parseInt(u.query.id);if(!isNaN(e)&&e>0){if(i[e]&&Date.now()-i[e].timestamp<=s){const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(i[e],["timestamp"]);return void l.status(200).json(t)}for(;c[e];)yield new Promise((e=>setTimeout(e,10)));c[e]=!0;const u=yield o(e),a=t(u);if(a.length<=1){const t={success:!0,error:null,result:{range:null}};l.status(200).json(t),c[e]=!1}const f=r(n(a));if(0===f.largestDifference){const t={success:!0,error:null,result:{range:null}};i[e]=Object.assign(Object.assign({},t),{timestamp:Date.now()}),l.status(200).json(t),c[e]=!1}else{const t={success:!0,error:null,result:{range:{start:f.item1,end:f.item2}}};i[e]=Object.assign(Object.assign({},t),{timestamp:Date.now()}),l.status(200).json(t),c[e]=!1}}else l.status(400).json({success:!1,error:"Something went wrong",result:null})}))}},exports.findLargestTimeDifference=r,exports.getFilteredArray=t,exports.sortByTime=n;
//# sourceMappingURL=index.js.map
