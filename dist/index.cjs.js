"use strict";function e(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}l((r=r.apply(e,t||[])).next())}))}function t(t,o){const i={};return function(c,l,u){return e(this,void 0,void 0,(function*(){const e=parseInt(c.query.id);if(!isNaN(e)&&e>0){if(i[e]&&Date.now()-i[e].timestamp<=t){console.log("returning from cache");const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(i[e],["timestamp"]);return void l.status(200).json(t)}const c=yield o(e),u=n(c),a=s(r(u));if(0===a.largestDifference||u.length<=1){let t={success:!0,error:null,result:{range:null}};i[e]=Object.assign(Object.assign({},t),{timestamp:Date.now()}),l.status(200).json(t)}else{let t={success:!0,error:null,result:{range:{start:a.item1,end:a.item2}}};i[e]=Object.assign(Object.assign({},t),{timestamp:Date.now()}),l.status(200).json(t)}}else l.status(400).json({success:!1,error:"Something went wrong",result:null})}))}}Object.defineProperty(exports,"__esModule",{value:!0});const n=e=>{const t=e.reduce(((e,t)=>e+t.price),0)/e.length;return e.filter((e=>e.price>t))},r=e=>e.sort(((e,t)=>e.time.getTime()-t.time.getTime())),s=e=>{let t=0,n=e[0].time,r=e[1].time;for(let s=1;s<e.length;s++){const o=e[s].time.getTime()-e[s-1].time.getTime();o>t&&(t=o,n=e[s-1].time,r=e[s].time)}return{largestDifference:t,item1:n,item2:r}};module.exports=t,exports.createHandler=t,exports.findLargestTimeDifference=s,exports.getFilteredArray=n,exports.sortByTime=r;
//# sourceMappingURL=index.cjs.js.map
